<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>3D Viewer</title>

    <style>
      html, body {
        margin: 0;
        height: 100%;
        background: #ffffff;
      }
      model-viewer {
        width: 100%;
        height: 100%;
      }
    </style>

    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  </head>

  <body>
    <model-viewer
      id="mv"
      camera-controls
      auto-rotate
      rotation-per-second="25deg"
      shadow-intensity="0.8"
      exposure="1"
      interaction-prompt="none"
      ar
      ar-modes="webxr scene-viewer quick-look"
      style="background:#ffffff;"
    ></model-viewer>

    <script>
      const params = new URLSearchParams(window.location.search);

      // Puede venir como ?m=archivo.glb
      const directModel = params.get("m");

      // Puede venir como ?sku=TS-CROCHET-DRAGON-STD
      const sku = params.get("sku");

      const basePath = "/3d/models/";
      const fallback = "TS-CROCHET-DRAGON-STD.glb";

      let finalModel = fallback;

      if (directModel) {
        finalModel = directModel;
      } else if (sku) {
        finalModel = sku + ".glb";
      }

      const mv = document.getElementById("mv");
      mv.src = basePath + finalModel;
    </script>
  </body>
</html>
